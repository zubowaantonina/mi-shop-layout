(()=>{"use strict";const e=e=>{const o=document.createElement("div");o.classList.add("modal-backdrop"),o.classList.add("fade"),document.body.append(o),e.classList.add("d-block"),setTimeout((()=>{o.classList.add("show"),e.classList.add("show")}),100)},o=e=>{const o=document.querySelector(".modal-backdrop");e.classList.remove("show"),o&&o.classList.remove("show"),setTimeout((()=>{e.classList.remove("d-block"),o&&o.remove()}),500)},t=e=>fetch(e).then((e=>e.json()));(()=>{const s=document.getElementById("open-auth-btn"),l=document.getElementById("open-cart-btn"),n=document.getElementById("logout-btn"),c=document.getElementById("auth-modal"),d=document.getElementById("cart-modal"),a=c.querySelectorAll(".close-btn"),r=c.querySelector(".login-btn"),i=()=>{s.classList.add("d-none"),l.classList.remove("d-none"),n.classList.remove("d-none"),o(c)};s.addEventListener("click",(()=>{e(c)})),a.forEach((e=>{e.addEventListener("click",(()=>{o(c)}))})),r.addEventListener("click",(()=>{const e=c.querySelector("#login-control"),o=c.querySelector("#password-control"),s=e.value,l=o.value;t("http://localhost:3001/profile").then((e=>{console.log(e),e.login&&e.login===s&&e.password&&e.password===l?(console.log("Успех"),i(),localStorage.setItem("auth",JSON.stringify(e))):console.log("Неудача")}))})),n.addEventListener("click",(()=>{localStorage.removeItem("auth"),s.classList.remove("d-none"),l.classList.add("d-none"),n.classList.add("d-none")})),l.addEventListener("click",(()=>{e(d)})),(()=>{const e=JSON.parse.localStorage.getItem("auth");e&&t("http://localhost:3001/profile").then((o=>{console.log(o),o.login&&o.login===e.login&&o.password&&o.password===e.password?(console.log("Успех"),i()):console.log("Неудача")}))})()})()})();