(()=>{"use strict";const e=e=>{const t=document.createElement("div");t.classList.add("modal-backdrop"),t.classList.add("fade"),document.body.append(t),e.classList.add("d-block"),setTimeout((()=>{t.classList.add("show"),e.classList.add("show")}),100)},t=e=>{const t=document.querySelector(".modal-backdrop");e.classList.remove("show"),t&&t.classList.remove("show"),setTimeout((()=>{e.classList.remove("d-block"),t&&t.remove()}),500)},o=e=>fetch("http://localhost:3001"+e).then((e=>{if(!e.ok)throw new Error;return e.json()}));(()=>{const e=document.getElementById("category-name"),t=document.getElementById("category-image"),o=document.getElementById("category-add-btn"),s=()=>{""===e.value||""===t.value?o.disabled=!0:o.disabled=!1};e.addEventListener("input",(()=>{s()})),t.addEventListener("input",(()=>{s()})),s()})(),(()=>{const s=document.getElementById("open-auth-btn"),n=document.getElementById("open-cart-btn"),l=document.getElementById("logout-btn"),d=document.getElementById("auth-modal"),c=document.getElementById("cart-modal"),a=d.querySelectorAll(".close-btn"),r=d.querySelector(".login-btn"),i=()=>{s.classList.add("d-none"),n.classList.remove("d-none"),l.classList.remove("d-none"),t(d)};s.addEventListener("click",(()=>{e(d)})),a.forEach((e=>{e.addEventListener("click",(()=>{t(d)}))})),r.addEventListener("click",(()=>{const e=d.querySelector("#login-control"),t=d.querySelector("#password-control"),s=e.value,n=t.value;o("/profile").then((e=>{console.log(e),e.login&&e.login===s&&e.password&&e.password===n?(console.log("Успех"),i(),localStorage.setItem("auth",JSON.stringify(e))):console.log("Неудача")}))})),l.addEventListener("click",(()=>{localStorage.removeItem("auth"),s.classList.remove("d-none"),n.classList.add("d-none"),l.classList.add("d-none")})),n.addEventListener("click",(()=>{e(c)})),(()=>{const e=JSON.parse(localStorage.getItem("auth"));e&&o("/profile").then((t=>{console.log(t),t.login&&t.login===e.login&&t.password&&t.password===e.password?(console.log("Успех"),i()):console.log("Неудача")}))})()})()})();